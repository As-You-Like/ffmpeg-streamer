{"version":3,"sources":["../../es6_public/install.es6"],"names":[],"mappings":"AAAA;;AAEA,CAAC,SAAS,IAAT,GAAiB;AAChB,MAAM,UAAU,SAAS,cAAT,CAAwB,SAAxB,CAAhB;;AAEA,MAAM,cAAc,SAAS,cAAT,CAAwB,aAAxB,CAApB;;AAEA,MAAM,gBAAgB,OAAO,EAAP,CAAU,OAAV,CAAqB,OAAO,QAAP,CAAgB,MAArC,eAAuD;;AAE3E,gBAAY,CAAC,WAAD,CAF+D;;AAI3E,cAAU,KAJiE;;AAM3E,kBAAc,IAN6D;;AAQ3E,uBAAmB;;AARwD,GAAvD,CAAtB;;AAYA,gBAAc,EAAd,CAAiB,gBAAjB,EAAmC,YAAM;AACvC,YAAQ,SAAR,GAAoB,2BAApB;AACD,GAFD;;AAIA;;;;;;AAMA,gBAAc,EAAd,CAAiB,OAAjB,EAA0B,YAAM;AAC9B,YAAQ,SAAR,GAAoB,eAApB;AACD,GAFD;;AAIA,gBAAc,EAAd,CAAiB,SAAjB,EAA4B,YAAM;AAChC,QAAM,SAAS,SAAS,cAAT,CAAwB,SAAxB,CAAf;;AAEA,kBAAc,EAAd,CAAiB,QAAjB,EAA2B,UAAC,IAAD,EAAU;AACnC,cAAQ,KAAK,IAAb;AACE,aAAK,aAAL;;AAEE,kBAAQ,SAAR,GAAoB,gBAApB;;AAEA,sBAAY,KAAZ,CAAkB,OAAlB,GAA4B,QAA5B;;AAEA;;AAEF,aAAK,MAAL;;AAEE,kBAAQ,SAAR,cAA6B,KAAK,GAAlC;;AAEA,sBAAY,KAAZ,CAAkB,OAAlB,GAA4B,MAA5B;;AAEA,wBAAc,UAAd;;AAEA;;AAEF,aAAK,UAAL;;AAEE,kBAAQ,SAAR,GAAoB,UAApB;;AAEA,sBAAY,KAAZ,CAAkB,OAAlB,GAA4B,MAA5B;;AAEA,wBAAc,UAAd;;AAEA,iBAAO,QAAP,CAAgB,OAAhB,CAAwB,GAAxB;;AAEA;AA7BJ;AA+BD,KAhCD;;AAkCA,WAAO,gBAAP,CAAwB,OAAxB,EAAiC,YAAM;AACrC,oBAAc,IAAd,CAAmB,UAAnB;AACD,KAFD;AAGD,GAxCD;AAyCD,CAxED","file":"install.js","sourcesContent":["'use strict';\n\n(function init () {\n  const message = document.getElementById('message')\n\n  const progressbar = document.getElementById('progressbar')\n\n  const installSocket = window.io.connect(`${window.location.origin}/install`, {\n\n    transports: ['websocket'],\n\n    forceNew: false,\n\n    reconnection: true,\n\n    reconnectionDelay: 500\n\n  })\n\n  installSocket.on('connect_failed', () => {\n    message.innerText = 'Socket Connection failed.'\n  })\n\n  /*\n  installSocket.on('disconnect', () => {\n    message.innerText = 'Socket Disconnect.';\n  })\n  */\n\n  installSocket.on('error', () => {\n    message.innerText = 'Socket Error.'\n  })\n\n  installSocket.on('connect', () => {\n    const button = document.getElementById('install')\n\n    installSocket.on('status', (data) => {\n      switch (data.type) {\n        case 'downloading':\n\n          message.innerText = 'Downloading...'\n\n          progressbar.style.display = 'inline'\n\n          break\n\n        case 'fail':\n\n          message.innerText = `Fail: ${data.msg}`\n\n          progressbar.style.display = 'none'\n\n          installSocket.disconnect()\n\n          break\n\n        case 'complete':\n\n          message.innerText = 'Complete'\n\n          progressbar.style.display = 'none'\n\n          installSocket.disconnect()\n\n          window.location.replace('/')\n\n          break\n      }\n    })\n\n    button.addEventListener('click', () => {\n      installSocket.emit('download')\n    })\n  })\n})()\n"]}