{"version":3,"sources":["../../es6_public/install.es6"],"names":[],"mappings":"AAAA;;AAEA,CAAC,SAAS,IAAT,GAAiB;AAChB;;AAEA,MAAM,UAAU,SAAS,cAAT,CAAwB,SAAxB,CAAhB;;AAEA,MAAM,cAAc,SAAS,cAAT,CAAwB,aAAxB,CAApB;;AAEA,MAAM,gBAAgB,OAAO,EAAP,CAAU,OAAV,CAAqB,OAAO,QAAP,CAAgB,MAArC,eAAuD;;AAE3E,gBAAY,CAAC,WAAD,CAF+D;;AAI3E,cAAU,KAJiE;;AAM3E,kBAAc,IAN6D;;AAQ3E,uBAAmB;;AARwD,GAAvD,CAAtB;;AAYA,gBAAc,EAAd,CAAiB,gBAAjB,EAAmC,YAAM;AACvC,YAAQ,SAAR,GAAoB,2BAApB;AACD,GAFD;;AAIA;;;;;;AAMA,gBAAc,EAAd,CAAiB,OAAjB,EAA0B,YAAM;AAC9B,YAAQ,SAAR,GAAoB,eAApB;AACD,GAFD;;AAIA,gBAAc,EAAd,CAAiB,SAAjB,EAA4B,YAAM;AAChC,QAAM,SAAS,SAAS,cAAT,CAAwB,SAAxB,CAAf;;AAEA,kBAAc,EAAd,CAAiB,QAAjB,EAA2B,UAAC,IAAD,EAAU;AACnC,cAAQ,KAAK,IAAb;AACE,aAAK,aAAL;;AAEE,kBAAQ,SAAR,GAAoB,gBAApB;;AAEA,sBAAY,KAAZ,CAAkB,OAAlB,GAA4B,QAA5B;;AAEA;;AAEF,aAAK,MAAL;;AAEE,kBAAQ,SAAR,cAA6B,KAAK,GAAlC;;AAEA,sBAAY,KAAZ,CAAkB,OAAlB,GAA4B,MAA5B;;AAEA,wBAAc,UAAd;;AAEA;;AAEF,aAAK,UAAL;;AAEE,kBAAQ,SAAR,GAAoB,UAApB;;AAEA,sBAAY,KAAZ,CAAkB,OAAlB,GAA4B,MAA5B;;AAEA,wBAAc,UAAd;;AAEA,iBAAO,QAAP,CAAgB,OAAhB,CAAwB,GAAxB;;AAEA;AA7BJ;AA+BD,KAhCD;;AAkCA,WAAO,gBAAP,CAAwB,OAAxB,EAAiC,YAAM;AACrC,oBAAc,IAAd,CAAmB,UAAnB;AACD,KAFD;AAGD,GAxCD;AAyCD,CA1ED","file":"install.js","sourcesContent":["// jshint browser: true\r\n\r\n(function init () {\r\n  'use strict'\r\n\r\n  const message = document.getElementById('message')\r\n\r\n  const progressbar = document.getElementById('progressbar')\r\n\r\n  const installSocket = window.io.connect(`${window.location.origin}/install`, {\r\n\r\n    transports: ['websocket'],\r\n\r\n    forceNew: false,\r\n\r\n    reconnection: true,\r\n\r\n    reconnectionDelay: 500\r\n\r\n  })\r\n\r\n  installSocket.on('connect_failed', () => {\r\n    message.innerText = 'Socket Connection failed.'\r\n  })\r\n\r\n  /*\r\n  installSocket.on('disconnect', () => {\r\n    message.innerText = 'Socket Disconnect.';\r\n  })\r\n  */\r\n\r\n  installSocket.on('error', () => {\r\n    message.innerText = 'Socket Error.'\r\n  })\r\n\r\n  installSocket.on('connect', () => {\r\n    const button = document.getElementById('install')\r\n\r\n    installSocket.on('status', (data) => {\r\n      switch (data.type) {\r\n        case 'downloading':\r\n\r\n          message.innerText = 'Downloading...'\r\n\r\n          progressbar.style.display = 'inline'\r\n\r\n          break\r\n\r\n        case 'fail':\r\n\r\n          message.innerText = `Fail: ${data.msg}`\r\n\r\n          progressbar.style.display = 'none'\r\n\r\n          installSocket.disconnect()\r\n\r\n          break\r\n\r\n        case 'complete':\r\n\r\n          message.innerText = 'Complete'\r\n\r\n          progressbar.style.display = 'none'\r\n\r\n          installSocket.disconnect()\r\n\r\n          window.location.replace('/')\r\n\r\n          break\r\n      }\r\n    })\r\n\r\n    button.addEventListener('click', () => {\r\n      installSocket.emit('download')\r\n    })\r\n  })\r\n})()\r\n"]}